{% extends "base.html" %}

{% block title %}How It Works - Antlers{% endblock %}

{% block content %}
<!-- Live animated background (covers whole page except footer) -->
<div class="live-bg">
    <div class="bg-circle circle1"></div>
    <div class="bg-circle circle2"></div>
    <div class="bg-circle circle3"></div>
    <div class="bg-circle circle3"></div>
    <div class="bg-circle circle3"></div>
    <div class="bg-circle circle3"></div>
    <div class="bg-circle circle3"></div>
    <div class="bg-circle circle3"></div>
    <div class="bg-circle circle3"></div>
    <div class="bg-circle circle3"></div>
    <div class="bg-circle circle3"></div>
</div>

<!-- Simple Hero Section -->
<div class="simple-hero py-5">
    <div class="container py-4 text-center">
        <h1 class="display-4 fw-bold mb-3">How It Works</h1>
        <p class="lead mb-0">Learn how to use the Antlers platform in a few simple steps</p>
    </div>
</div>

<!-- Timeline/Flowchart Section -->
<div class="section py-5">
    <div class="container py-4">
        <div class="timeline">
            <div class="timeline-item left fade-in">
                <div class="timeline-content shadow-sm">
                    <div class="timeline-marker"></div>
                    <h3>Create Your Account</h3>
                    <p class="text-muted">Sign up for a free account on Antlers. Fill in your profile with accurate information so other users can trust you in the community.</p>
                    <a href="{{ url_for('register') }}" class="btn btn-sm btn-primary rounded-pill mt-2">Register Now</a>
                </div>
            </div>
            
            <div class="timeline-item right fade-in delay-1">
                <div class="timeline-content shadow-sm">
                    <div class="timeline-marker"></div>
                    <h3>Choose Your Path</h3>
                    <div class="role-options mt-3">
                        <div class="role-option p-3 mb-2 bg-soft-accent rounded">
                            <strong class="d-block mb-1"><i class="fas fa-search me-2 text-primary"></i>As a Borrower:</strong>
                            <p class="mb-0 small text-muted">Browse available items in the community to find what you need.</p>
                        </div>
                        <div class="role-option p-3 mb-2 bg-soft-accent rounded">
                            <strong class="d-block mb-1"><i class="fas fa-share-alt me-2 text-primary"></i>As a Lender:</strong>
                            <p class="mb-0 small text-muted">List items you're willing to share temporarily.</p>
                        </div>
                        <div class="role-option p-3 mb-2 bg-soft-accent rounded">
                            <strong class="d-block mb-1"><i class="fas fa-gift me-2 text-primary"></i>As a Donor:</strong>
                            <p class="mb-0 small text-muted">Submit items you want to donate permanently.</p>
                        </div>
                        <div class="role-option p-3 mb-2 bg-soft-accent rounded">
                            <strong class="d-block mb-1"><i class="fas fa-exchange-alt me-2 text-primary"></i>As a Swapper:</strong>
                            <p class="mb-0 small text-muted">Participate in weekly swap events to exchange items with others.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="timeline-item left fade-in delay-2">
                <div class="timeline-content shadow-sm">
                    <div class="timeline-marker"></div>
                    <h3>Admin Approval</h3>
                    <p class="text-muted">When you list an item for lending or donation, our admin team reviews it first. This ensures quality and safety for all users. You'll be notified once your item is approved.</p>
                    <div class="alert alert-light border mt-3 small shadow-sm">
                        <i class="fas fa-info-circle text-primary me-2"></i>
                        <strong>Note:</strong> Most items are approved within 24 hours.
                    </div>
                </div>
            </div>
            
            <div class="timeline-item right fade-in delay-3">
                <div class="timeline-content shadow-sm">
                    <div class="timeline-marker"></div>
                    <h3>Borrowing Process</h3>
                    <p class="text-muted">Find an item you need, send a request with your preferred pickup time and location. The owner will review and approve your request, then you can arrange to collect the item.</p>
                    <div class="process-steps mt-3">
                        <div class="step d-flex align-items-center mb-2">
                            <span class="step-number"></span>
                            <span class="step-text">Find item and send request</span>
                        </div>
                        <div class="step d-flex align-items-center mb-2">
                            <span class="step-number"></span>
                            <span class="step-text">Receive approval from owner</span>
                        </div>
                        <div class="step d-flex align-items-center">
                            <span class="step-number"></span>
                            <span class="step-text">Arrange pickup details</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="timeline-item left fade-in delay-4">
                <div class="timeline-content shadow-sm">
                    <div class="timeline-marker"></div>
                    <h3>Lending Process</h3>
                    <p class="text-muted">After your item is approved, borrowers can send requests. You can review each request and decide who to lend to. Arrange pickup details through our secure platform.</p>
                    <div class="process-steps mt-3">
                        <div class="step d-flex align-items-center mb-2">
                            <span class="step-number"></span>
                            <span class="step-text">List item and wait for approval</span>
                        </div>
                        <div class="step d-flex align-items-center mb-2">
                            <span class="step-number"></span>
                            <span class="step-text">Receive and review borrowing requests</span>
                        </div>
                        <div class="step d-flex align-items-center">
                            <span class="step-number"></span>
                            <span class="step-text">Approve request and arrange handover</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="timeline-item right fade-in delay-5">
                <div class="timeline-content shadow-sm">
                    <div class="timeline-marker"></div>
                    <h3>Return & Feedback</h3>
                    <p class="text-muted">When the borrowing period ends, the item is returned to the owner in the same condition. Both parties can leave feedback to build trust in the community.</p>
                    <div class="feedback-example p-3 mt-3 border rounded text-center bg-soft-accent">
                        <i class="fas fa-star text-accent"></i>
                        <i class="fas fa-star text-accent"></i>
                        <i class="fas fa-star text-accent"></i>
                        <i class="fas fa-star text-accent"></i>
                        <i class="fas fa-star text-accent"></i>
                        <p class="mb-0 mt-2 small font-italic">"Great transaction! Item was in perfect condition and the owner was very helpful."</p>
                    </div>
                </div>
            </div>
            
            <!-- Swap Game Section -->
            <div class="timeline-item left fade-in delay-6">
                <div class="timeline-content shadow-sm">
                    <div class="timeline-marker"></div>
                    <h3>Swap Game</h3>
                    <p class="text-muted">Participate in our weekly swap events! Submit an item, get admin approval, and receive a surprise item from another participant in return.</p>
                    <div class="process-steps mt-3">
                        <div class="step d-flex align-items-center mb-2">
                            <span class="step-number"></span>
                            <span class="step-text">Submit an item for the swap game</span>
                        </div>
                        <div class="step d-flex align-items-center mb-2">
                            <span class="step-number"></span>
                            <span class="step-text">Wait for admin approval</span>
                        </div>
                        <div class="step d-flex align-items-center mb-2">
                            <span class="step-number"></span>
                            <span class="step-text">Join the weekend swap event</span>
                        </div>
                        <div class="step d-flex align-items-center">
                            <span class="step-number"></span>
                            <span class="step-text">Arrange a virtual meeting for item delivery</span>
                        </div>
                    </div>
                    <a href="{{ url_for('game_selection') }}" class="btn btn-sm btn-primary rounded-pill mt-3">Join Swap Game</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Simple CTA -->
<div class="simple-cta py-5">
    <div class="container py-3 text-center">
        <a href="{{ url_for('register') }}" class="btn btn-primary btn-lg rounded-pill px-4 me-3">Create Account</a>
        <a href="{{ url_for('home') }}" class="btn btn-outline-primary btn-lg rounded-pill px-4">Browse Items</a>
    </div>
</div>

{% block extra_css %}
<style>
/* --- Fix for live background overlay issues --- */
:root {
    --timeline-bg: transparent;
    --timeline-text: #222;
    --timeline-muted: #444;
    --timeline-line: #5294e2;
    --timeline-marker: #5294e2;
    --timeline-card: #fff;
    --timeline-shadow: 0 3px 10px rgba(0,0,0,0.08);
    --timeline-border: 1px solid rgba(0,0,0,0.05);
    --timeline-accent: #ffcc50;
}
body {
    background: transparent !important;
}
.simple-hero, .section {
    background: transparent !important;
}

.live-bg {
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    z-index: 0;
    pointer-events: none;
}
.bg-circle {
    position: absolute;
    border-radius: 50%;
    opacity: 0.15;
    animation: float 18s infinite alternate ease-in-out;
}
.circle1 { width: 300px; height: 300px; background: var(--timeline-line); top: 10%; left: 5%; animation-delay: 0s; }
.circle2 { width: 200px; height: 200px; background: var(--timeline-accent); bottom: 15%; right: 10%; animation-delay: 4s; }
.circle3 { width: 250px; height: 250px; background: var(--timeline-marker); top: 60%; left: 60%; animation-delay: 8s; }
@keyframes float {
    0% { transform: translateY(0) scale(1);}
    100% { transform: translateY(-30px) scale(1.1);}
}

/* 1. Step bullet points and spacing */
.step-number {
    width: 18px;
    height: 18px;
    background: none;
    color: var(--timeline-line);
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 16px;
    margin-left: 2px;
}
.step-number::before {
    content: '●';
    color: var(--timeline-line);
    font-size: 1.2em;
}

/* 2. Live background fills timeline section */
.section {
    position: relative;
    overflow: hidden;
}

/* 3. Shadows and outlines in white mode */
.light-theme .timeline-content {
    box-shadow: 0 4px 24px rgba(0,0,0,0.10), 0 0 0 2px #fff;
    border: 1.5px solid #e0e0e0;
}
.light-theme .timeline-marker {
    box-shadow: 0 0 0 4px #fff, 0 2px 8px rgba(0,0,0,0.10);
    border: 3px solid #fff;
}

/* Timeline styles */
.timeline {
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 0;
}
.timeline::after {
    content: '';
    position: absolute;
    width: 4px;
    background-color: var(--timeline-line);
    top: 0;
    bottom: 0;
    left: 50%;
    margin-left: -2px;
    border-radius: 2px;
}
.timeline-item {
    padding: 10px 40px;
    position: relative;
    width: 50%;
    box-sizing: border-box;
    margin-bottom: 30px;
}
.timeline-content {
    padding: 25px;
    background-color: var(--timeline-card);
    border-radius: 8px;
    box-shadow: var(--timeline-shadow);
    border: var(--timeline-border);
    position: relative;
    transition: all 0.3s ease;
    color: var(--timeline-text);
}
.timeline-content h3, .timeline-content p, .timeline-content .text-muted {
    color: var(--timeline-text);
}
.timeline-content .text-muted {
    color: var(--timeline-muted) !important;
}
.timeline-marker {
    position: absolute;
    width: 20px;
    height: 20px;
    background-color: var(--timeline-marker);
    border-radius: 50%;
    border: 4px solid var(--timeline-card);
    box-shadow: 0 0 0 4px rgba(0,0,0,0.1);
    z-index: 1;
}
.left { left: 0; }
.right { left: 50%; }
.left .timeline-marker { right: -50px; }
.right .timeline-marker { left: -50px; }
.left .timeline-content::after {
    content: '';
    position: absolute;
    border: 10px solid transparent;
    border-left-color: var(--timeline-card);
    right: -20px;
    top: 20px;
}
.right .timeline-content::after {
    content: '';
    position: absolute;
    border: 10px solid transparent;
    border-right-color: var(--timeline-card);
    left: -20px;
    top: 20px;
}

/* Responsive: stack on mobile */
@media screen and (max-width: 768px) {
    .timeline::after { left: 31px; }
    .timeline-item { width: 100%; padding-left: 70px; padding-right: 15px; }
    .timeline-item.right { left: 0; }
    .left .timeline-marker, .right .timeline-marker { left: 20px; }
    .left .timeline-content::after, .right .timeline-content::after {
        left: -20px;
        border-right-color: var(--timeline-card);
        border-left-color: transparent;
    }
    .timeline-content h3 { margin-left: 25px; }
}
</style>

{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add fade-in animations as elements come into view
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });
        
        document.querySelectorAll('.fade-in').forEach(item => {
            observer.observe(item);
        });
    });
</script>
{% endblock %}
{% endblock %} 
{% extends 'base.html' %}
{% block head %}
<title>Admin Blog Dashboard | Antlers</title>
{% endblock %}
{% block content %}
<div class="container py-5">
    <h1 class="mb-4">Admin Blog Dashboard</h1>
    <h3>Drafts</h3>
    {% if drafts %}
    <table class="table table-bordered table-hover mb-5">
        <thead><tr><th>Title</th><th>Author</th><th>Created</th><th>Actions</th></tr></thead>
        <tbody>
        {% for blog in drafts %}
        <tr>
            <td>{{ blog.title }}</td>
            <td>{{ blog.author }}</td>
            <td>{{ blog.created_at.strftime('%b %d, %Y') }}</td>
            <td>
                <a href="{{ url_for('edit_blog', blog_id=blog.id) }}" class="btn btn-sm btn-primary">Edit/Approve</a>
                <form action="{{ url_for('delete_blog', blog_id=blog.id) }}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete this draft?')">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info">No drafts available.</div>
    {% endif %}
    <h3>Approved Blogs</h3>
    {% if approved %}
    <table class="table table-bordered table-hover">
        <thead><tr><th>Title</th><th>Author</th><th>Published</th><th>Actions</th></tr></thead>
        <tbody>
        {% for blog in approved %}
        <tr>
            <td><a href="{{ url_for('blog_post', slug=blog.slug) }}">{{ blog.title }}</a></td>
            <td>{{ blog.author }}</td>
            <td>{{ blog.created_at.strftime('%b %d, %Y') }}</td>
            <td>
                <a href="{{ url_for('edit_blog', blog_id=blog.id) }}" class="btn btn-sm btn-secondary">Edit</a>
                <form action="{{ url_for('delete_blog', blog_id=blog.id) }}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete this blog?')">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info">No approved blogs yet.</div>
    {% endif %}
</div>
{% endblock %} 